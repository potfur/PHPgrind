var Treemap=function(){function e(r,i,s,o,u){var a,f,l,c,h;if(!r||!r.length){return}if(r.length==1){r[0].x=i;r[0].y=s;r[0].width=o;r[0].height=u;return}r=t(r);a=n(r[0])+n(r[1]);f=Math.ceil(o*n(r[0])/a);l=Math.ceil(u*n(r[0])/a);c=o-f;h=u-l;if(o/u>2.4){e(r[0],i,s,f,u);e(r[1],i+f,s,c,u);return}e(r[0],i,s,o,l);e(r[1],i,s+l,o,h)}function t(e){var t,r=[],i=[],s=0,o=n(e)/2,u;for(t=0;t<e.length;t++){u=s+e[t].weight;if(Math.abs(o-u)>Math.abs(o-s)){i.push(e[t]);continue}r.push(e[t]);s=u}return[r,i]}function n(e){var t,n=0;if(!e.length){return 0}for(t=0;t<e.length;t++){n+=parseInt(e[t].weight)}return n}return function(n,r){n.innerHTML="";e(r,0,0,n.width(),n.height());var i,s;for(i=0;i<r.length;i++){s=$('<a href="'+r[i].url+'" title="'+r[i].name+'"><span class="type '+r[i].type+'"></span>'+r[i].name.replace(/.*\\/m,"")+"<strong>"+r[i].totalSelfCost+"%</strong></a>");s.css("background","rgba(255, 0, 0, "+r[i].totalSelfCost/100+")");s.css("left",Math.ceil(r[i].x)+"px");s.css("top",Math.ceil(r[i].y)+"px");s.css("width",r[i].width+"px");s.css("height",r[i].height+"px");n.append(s)}}}()